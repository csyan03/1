<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>小明同学的主页</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
        }

        .profile {
            padding: 15px;
            border-bottom: 1px solid #333;
        }

        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: url('241226-t') no-repeat center/cover;
        }

        .stats {
            margin-top: 10px;
            font-size: 14px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            padding: 2px;
        }

        .folder-thumb {
            aspect-ratio: 1;
            background-size: cover;
            position: relative;
        }

        .folder-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: none;
        }

        .media-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .media-item {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none;
            position: absolute;
        }

        .date {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="profile">
        <div class="avatar"></div>
        <h2>小明同学</h2>
        <div class="stats">752获赞 58关注 88粉丝</div>
        <div>22岁 IP：山西阿拉伯联合酋长国</div>
    </div>

    <div class="grid" id="folderGrid"></div>

    <div class="folder-view" id="folderView">
        <div class="media-container" id="mediaContainer"></div>
        <div class="date" id="currentDate"></div>
    </div>

    <script>
        const folders = {
            1: {
                bgm: '250115.mp3',
                media: ['250115-1.mp4', '250115-2.mp4'],
                thumb: '250115-1.mp4'
            },
            2: {
                bgm: '250101.mp3',
                media: ['250101-1.mp4', '250101-2.mp4', '250101-3.mp4', '250101-4.mp4'],
                thumb: '250101-1.mp4'
            },
            3: {
                bgm: '241215.mp3',
                media: ['241215-1.mp4', '241215-2.mp4', '241215-3.mp4', '241215-4.webp'],
                thumb: '241215-1.mp4'
            }
        };

        let currentFolder = 1;
        let currentMediaIndex = 0;
        let bgmAudio = new Audio();
        let currentVideo = null;

        // 初始化文件夹缩略图
        function initFolders() {
            const grid = document.getElementById('folderGrid');
            for (let i = 1; i <= 3; i++) {
                const div = document.createElement('div');
                div.className = 'folder-thumb';
                div.style.backgroundImage = `url(${folders[i].thumb})`;
                div.addEventListener('click', () => openFolder(i));
                grid.appendChild(div);
            }
        }

        // 打开文件夹
        function openFolder(folderId) {
            currentFolder = folderId;
            currentMediaIndex = 0;
            document.getElementById('folderView').style.display = 'block';
            loadMedia();
            playBgm();
        }

        // 加载媒体内容
        function loadMedia() {
            const container = document.getElementById('mediaContainer');
            container.innerHTML = '';
            folders[currentFolder].media.forEach((file, index) => {
                const media = file.endsWith('.mp4') ? 
                    createVideoElement(file, index === 0) :
                    createImageElement(file, index === 0);
                container.appendChild(media);
            });
        }

        function createVideoElement(src, autoplay) {
            const video = document.createElement('video');
            video.src = src;
            video.loop = true;
            video.muted = false;
            if(autoplay) {
                video.play();
                currentVideo = video;
            }
            video.addEventListener('click', pauseAll);
            return video;
        }

        function createImageElement(src) {
            const img = document.createElement('img');
            img.src = src;
            img.className = 'media-item';
            img.style.display = 'block';
            img.addEventListener('click', pauseAll);
            return img;
        }

        // 播放背景音乐
        function playBgm() {
            bgmAudio.pause();
            bgmAudio = new Audio(folders[currentFolder].bgm);
            bgmAudio.play();
            updateDate();
        }

        // 更新日期显示
        function updateDate() {
            const dateStr = folders[currentFolder].bgm.replace('.mp3', '');
            const formattedDate = `20${dateStr.slice(0,2)}年${dateStr.slice(2,4)}月${dateStr.slice(4,6)}日`;
            document.getElementById('currentDate').textContent = formattedDate;
        }

        // 暂停所有播放
        function pauseAll() {
            bgmAudio.pause();
            if(currentVideo) currentVideo.pause();
        }

        // 滑动处理
        let touchStartX = 0;
        let touchStartY = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });

        document.addEventListener('touchend', e => {
            const deltaX = e.changedTouches[0].clientX - touchStartX;
            const deltaY = e.changedTouches[0].clientY - touchStartY;

            if(Math.abs(deltaX) > Math.abs(deltaY)) {
                // 左右滑动切换媒体
                if(deltaX > 50 && currentMediaIndex > 0) {
                    currentMediaIndex--;
                } else if(deltaX < -50 && currentMediaIndex < folders[currentFolder].media.length - 1) {
                    currentMediaIndex++;
                }
                showCurrentMedia();
            } else {
                // 上下滑动切换文件夹
                if(deltaY > 50) { // 向下滑动
                    currentFolder = Math.max(1, currentFolder - 1);
                } else if(deltaY < -50) { // 向上滑动
                    currentFolder = Math.min(3, currentFolder + 1);
                }
                openFolder(currentFolder);
            }
        });

        function showCurrentMedia() {
            const medias = document.querySelectorAll('.media-item');
            medias.forEach((media, index) => {
                media.style.display = index === currentMediaIndex ? 'block' : 'none';
                if(media.tagName === 'VIDEO') {
                    if(index === currentMediaIndex) {
                        media.currentTime = 0;
                        media.play();
                        currentVideo = media;
                    } else {
                        media.pause();
                    }
                }
            });
            playBgm();
        }

        // 初始化
        initFolders();
    </script>
</body>
</html>